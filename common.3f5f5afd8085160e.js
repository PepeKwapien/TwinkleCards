"use strict";(self.webpackChunkTwinkleCards=self.webpackChunkTwinkleCards||[]).push([[592],{7038:(v,C,l)=>{l.d(C,{G:()=>_});var s=l(5861),i=l(9774);class h{constructor(d,t,e,n,r){this.name=d,this.ownerId=t,this.isPublic=e,this.type=n,this.flashcards=[],r&&(this.description=r)}static FromCollectionInputs(d,t){return new h(t.name,d,t.isPublic,t.type,t.description)}}var m=l(5619),f=l(6689);let _=(()=>{class a{get collection$(){return this._collectionSubject}constructor(t){this._firestore=t,this._collectionName="collections",this._collectionSubject=new m.X(void 0)}ngOnDestroy(){this.stopCollectionChangesListener()}createCollection(t,e){var n=this;return(0,s.Z)(function*(){console.log(e);const r=h.FromCollectionInputs(t,e);return(yield(0,i.ET)((0,i.hJ)(n._firestore,n._collectionName),{...r})).id})()}setupCollectionChangesListener(t){this._collectionChangesUnsubscribe=(0,i.cf)((0,i.JU)(this._firestore,this._collectionName,t),e=>this._collectionSubject.next(e.data()))}stopCollectionChangesListener(){void 0!==this._collectionChangesUnsubscribe&&(this._collectionSubject.next(void 0),this._collectionChangesUnsubscribe())}readCollection(t){var e=this;return(0,s.Z)(function*(){return(yield(0,i.QT)((0,i.JU)(e._firestore,e._collectionName,t))).data()})()}updateCollection(t,e){var n=this;return(0,s.Z)(function*(){yield(0,i.r7)((0,i.JU)(n._firestore,n._collectionName,t),{name:e.name,description:e.description,isPublic:e.isPublic})})()}deleteCollection(t){var e=this;return(0,s.Z)(function*(){yield(0,i.oe)((0,i.JU)(e._firestore,e._collectionName,t))})()}createFlashcard(t,e){var n=this;return(0,s.Z)(function*(){yield(0,i.r7)((0,i.JU)(n._firestore,n._collectionName,t),{flashcards:(0,i.vr)(e)})})()}updateFlashcard(t,e){var n=this;return(0,s.Z)(function*(){const r=n._collectionSubject.value,u=r.flashcards,b=r.type,c=u.find(o=>o.id===e.id);if(c){if("definition"===b){const o=e;c.term=o.term,c.definition=o.definition}else{const o=e;c.word=o.word,c.sentence=o.sentence,c.translation=o.translation,c.translatedSentence=o.translatedSentence}yield(0,i.r7)((0,i.JU)(n._firestore,n._collectionName,t),{flashcards:u})}})()}deleteFlashcard(t,e){var n=this;return(0,s.Z)(function*(){yield(0,i.r7)((0,i.JU)(n._firestore,n._collectionName,t),{flashcards:(0,i.Ab)(e)})})()}static#e=this.\u0275fac=function(e){return new(e||a)(f.LFG(i.gg))};static#t=this.\u0275prov=f.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);