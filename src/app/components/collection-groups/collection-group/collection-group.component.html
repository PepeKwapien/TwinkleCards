<ng-container *ngIf="collectionGroup !== undefined">
    <div class="collection-group-header light-box-shadow" [class]="collectionGroup.color">
        <h1 class="header-text collection-group-header-text-margin">{{ collectionGroup.name }}</h1>
        <div class="collection-group-header-controls">
            <button class="empty-button">
                <img src="./assets/edit.svg" class="hover-icon" (click)="openModal(editCollectionGroupForm)" />
            </button>
            <button class="empty-button">
                <img src="./assets/close.svg" class="hover-icon" (click)="deleteGroup()" />
            </button>
        </div>
    </div>
    <div class="collection-grid">
        <button
            *ngFor="let collection of collectionGroup.collections; let index = index"
            class="collection-box existing-collection light-box-shadow empty-button slide-from-left-and-scale-enter"
            [style.animation-delay]="indexOnScreen * 0.1 + 0.1 * index + 's'"
            [class]="collectionGroup.color"
            [routerLink]="'/' + collection.id">
            <div class="collection-group-action-buttons-container">
                <button class="empty-button">
                    <img
                        src="./assets/edit.svg"
                        (click)="openEditCollectionModal($event, collection, editCollectionForm)"
                        class="grayed-icon" />
                </button>
                <button class="empty-button">
                    <img src="./assets/close.svg" (click)="confirmCollectionDelete($event, collection)" class="grayed-icon" />
                </button>
            </div>
            {{ collection.name }}
        </button>
        <button
            class="add-new-collection-box collection-box light-box-shadow empty-button slide-from-left-and-scale-enter"
            [style.animation-delay]="indexOnScreen * 0.1 + 0.1 * collectionGroup.collections.length + 's'"
            (click)="openCreateCollectionModal(collectionForm)">
            <img class="grayed-icon" src="./assets/add-circle.svg" />
        </button>
    </div>
</ng-container>

<ng-template #collectionForm><app-create-collection-form></app-create-collection-form> </ng-template>

<ng-template #editCollectionGroupForm>
    <app-edit-collection-group-form [collectionGroup]="collectionGroup"></app-edit-collection-group-form>
</ng-template>

<ng-template #editCollectionForm>
    <app-edit-collection-form
        [collectionGroup]="collectionGroup"
        [collectionReference]="lastEditedCollection!"></app-edit-collection-form>
</ng-template>
